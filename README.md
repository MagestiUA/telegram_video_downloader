# Telegram Video Downloader Bot

Telegram –±–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—ñ–¥–µ–æ –∑ –∫–∞–Ω–∞–ª—ñ–≤/—á–∞—Ç—ñ–≤ –∑ —Ä–æ–∑—É–º–Ω–æ—é –æ–±—Ä–æ–±–∫–æ—é –Ω–∞–∑–≤ —Ç–∞ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—î—é —Ñ–∞–π–ª—ñ–≤.

## –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

- ü§ñ **AI-–∞–Ω–∞–ª—ñ–∑ –Ω–∞–∑–≤** - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Google Gemini –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –Ω–∞–∑–≤ –∞–Ω—ñ–º–µ, —Å–µ–∑–æ–Ω—ñ–≤ —Ç–∞ –µ–ø—ñ–∑–æ–¥—ñ–≤
- üì• **–°—Ç–∞–±—ñ–ª—å–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è** - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≤–±—É–¥–æ–≤–∞–Ω–∏–π Pyrogram downloader
- üìã **–ß–µ—Ä–≥–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å** - –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –¥–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è –ø–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- üóÇÔ∏è **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è** - —Å—Ç–≤–æ—Ä—é—î —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫ —Ç–∞ –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤—É—î —Ñ–∞–π–ª–∏
- üíæ **Mapper –¥–ª—è –Ω–∞–∑–≤** - –∑–∞–ø–∞–º'—è—Ç–æ–≤—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ –Ω–∞–∑–≤ –¥–ª—è –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
- üîÑ **Rate limiting** - –æ–±–º–µ–∂–µ–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ Google AI API (10/—Ö–≤)
- üìù **–õ–æ–≥—É–≤–∞–Ω–Ω—è** - –∑–∞–ø–∏—Å –ª–æ–≥—ñ–≤ —É —Ñ–∞–π–ª –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—é —Ä–æ—Ç–∞—Ü—ñ—î—é

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

```
tg_video_downloader/
‚îú‚îÄ‚îÄ main.py                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É, –æ–±—Ä–æ–±–Ω–∏–∫–∏ Pyrogram
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ config.py          # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ pydantic-settings
‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îú‚îÄ‚îÄ downloader.py      # –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —á–µ—Ä–µ–∑ Pyrogram download_media
‚îÇ   ‚îú‚îÄ‚îÄ queue_manager.py   # –ß–µ—Ä–≥–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å
‚îÇ   ‚îî‚îÄ‚îÄ renamer.py         # –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –Ω–∞–∑–≤ —Ñ–∞–π–ª—ñ–≤
‚îú‚îÄ‚îÄ analyzer/
‚îÇ   ‚îú‚îÄ‚îÄ ai_cleaner.py      # AI-–∞–Ω–∞–ª—ñ–∑ —á–µ—Ä–µ–∑ Google Gemini
‚îÇ   ‚îî‚îÄ‚îÄ mapper.py          # –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç–µ–π –Ω–∞–∑–≤
‚îú‚îÄ‚îÄ sessions/              # Pyrogram session files
‚îú‚îÄ‚îÄ mappings.json          # –ë–∞–∑–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç–µ–π –Ω–∞–∑–≤
‚îî‚îÄ‚îÄ app.log               # –§–∞–π–ª –ª–æ–≥—ñ–≤ (—Ä–æ—Ç–∞—Ü—ñ—è 10 –ú–ë)
```

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### 1. Environment Variables (.env)

```env
API_ID=your_telegram_api_id
API_HASH=your_telegram_api_hash
BOT_TOKEN=your_bot_token

GEMINI_API_KEY=your_gemini_api_key

DOWNLOAD_PATH=/data/downloads
ALLOWED_USERS=123456789,987654321

# –û–ø—Ü—ñ–π–Ω–æ –¥–ª—è Docker
SESSION_STRING=
```

### 2. –û—Ç—Ä–∏–º–∞–Ω–Ω—è Credentials

**Telegram API:**
1. –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ [my.telegram.org](https://my.telegram.org)
2. –°—Ç–≤–æ—Ä–∏ App —Ç–∞ –æ—Ç—Ä–∏–º–∞–π `API_ID` —ñ `API_HASH`
3. –ß–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather) —Å—Ç–≤–æ—Ä–∏ –±–æ—Ç–∞ —Ç–∞ –æ—Ç—Ä–∏–º–∞–π `BOT_TOKEN`

**Google Gemini:**
1. –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ [Google AI Studio](https://aistudio.google.com/app/apikey)
2. –°—Ç–≤–æ—Ä–∏ API key

## –ó–∞–ø—É—Å–∫

### Docker (–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

```bash
# –ü–æ–±—É–¥—É–≤–∞—Ç–∏ –æ–±—Ä–∞–∑
docker-compose build

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏
docker-compose up -d

# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥–∏
docker-compose logs -f

# –ó—É–ø–∏–Ω–∏—Ç–∏
docker-compose down
```

### –õ–æ–∫–∞–ª—å–Ω–æ

```bash
# –°—Ç–≤–æ—Ä–∏—Ç–∏ venv
python -m venv .venv
source .venv/bin/activate  # Linux/Mac
# –∞–±–æ
.venv\Scripts\activate     # Windows

# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
pip install -r requirements.txt

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏
python main.py
```

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

1. –î–æ–¥–∞–π —Å–≤—ñ–π User ID –≤ `ALLOWED_USERS` (–æ—Ç—Ä–∏–º–∞–π —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É `/id`)
2. –í—ñ–¥–ø—Ä–∞–≤ –±–æ—Ç—É –≤—ñ–¥–µ–æ –∞–±–æ forward –∑ –∫–∞–Ω–∞–ª—É
3. –ë–æ—Ç:
   - –ü—Ä–æ–∞–Ω–∞–ª—ñ–∑—É—î –Ω–∞–∑–≤—É —á–µ—Ä–µ–∑ AI
   - –ó–∞–ø–∏—Ç–∞—î –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –Ω–∞–∑–≤–∏ (—è–∫—â–æ –Ω–µ–∑–Ω–∞–π–æ–º–∞)
   - –î–æ–¥–∞—Å—Ç—å –≤ —á–µ—Ä–≥—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å
   - –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç—å —Ç–∞ –∑–±–µ—Ä–µ–∂–µ –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—é –Ω–∞–∑–≤–æ—é

## –§–æ—Ä–º–∞—Ç –ù–∞–∑–≤ –§–∞–π–ª—ñ–≤

- **–ï–ø—ñ–∑–æ–¥–∏**: `Anime Title - S01E05.mp4`
- **–§—ñ–ª—å–º–∏**: `Movie Title.mp4`

## –õ–æ–≥—É–≤–∞–Ω–Ω—è

–õ–æ–≥–∏ –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è –æ–¥–Ω–æ—á–∞—Å–Ω–æ:
- **–ö–æ–Ω—Å–æ–ª—å** - –¥–ª—è `docker logs`
- **–§–∞–π–ª** `app.log` - –∑ —Ä–æ—Ç–∞—Ü—ñ—î—é (–º–∞–∫—Å 10 –ú–ë, 5 —Ä–µ–∑–µ—Ä–≤–Ω–∏—Ö –∫–æ–ø—ñ–π)

## –û—Å—Ç–∞–Ω–Ω—ñ –ó–º—ñ–Ω–∏

–î–∏–≤–∏—Å—å [CHANGELOG.md](CHANGELOG.md) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **Pyrogram** - Telegram MTProto –∫–ª—ñ—î–Ω—Ç
- **Google Gemini** - AI –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É –Ω–∞–∑–≤
- **Pydantic Settings** - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é
- **Docker** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—è

## License

MIT
